# .windsurfrules

## Language

Use English language in all code and documentation.

## Purpose

Correct inaccurate or missing photo and video metadata (especially creation dates) in files exported from Apple Photos by referencing accurate metadata from Google Takeout JSON files.

## Folder Structure

- `./old` — Contains original media files exported from Google Takeout, each with an accompanying `.json` metadata file. This folder must remain untouched.
- `./new` — Contains media files exported from Apple Photos Library ("Unmodified Originals"). These may have incorrect or missing metadata.

## Processing Rules

1. For each `.json` file in `./old`, extract the `photoTakenTime` field.
2. Match each `.json` file to its corresponding media file by name (e.g., `IMG_1234.json` → `IMG_1234.jpg`).
3. If a matching media file exists in `./new`, update its metadata using the values from the `.json` file.
4. Use `exiftool` or a similar tool to set the following fields:
   - `DateTimeOriginal` (when the photo was taken)
   - `CreateDate` (when the file was created)
   - `ModifyDate` (last modified timestamp)
5. Do not manually move, copy, or rename any files. This script only modifies metadata in-place within `./new`.

## Additional Metadata (optional if available)

- `Title`
- GPS coordinates (`latitude`, `longitude`)

## Output and Logging

- Display only essential progress, statistics, and total files processed.
- Print detailed errors only when necessary for debugging.
- Avoid verbose or repeated console logs.

## Python Environment

- Use `python3` to run the script.
- Use `pip3` to install any required dependencies.

## Code Style Guidelines

- Follow modern Python best practices.
- Avoid code duplication.
- Keep logic clean, readable, and minimal.
- Validate behavior and structure before execution.

## Final Step (Manual)

After running the script, the user will manually re-import the corrected files from `./new` into the Apple Photos Library.